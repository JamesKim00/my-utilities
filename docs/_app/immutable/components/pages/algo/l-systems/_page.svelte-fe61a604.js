import{U as Je,S as lt,i as at,s as nt,a as b,k as h,q as H,c as m,l as c,m as y,h as w,r as J,n as p,V as rt,b as te,K as l,W as We,X as M,L as Y,Y as st,Z as j,B as Ge,E as qe,P as it,D as ot,o as ut,p as ft,u as ht,G as ct,_ as dt}from"../../../../chunks/index-74e6ecb3.js";import{w as tt}from"../../../../chunks/index-152b7952.js";const Ke={binaryTree:{axiom:"0",rules:{1:"11",0:"1[0]0"},actions:{0:["draw"],1:["draw"],"[":["push","left"],"]":["pop","right"]},defaults:{angle:45,iterationCount:7,length:6}},kochCurve:{axiom:"F",rules:{F:"F+F-F-F+F"},actions:{F:["draw"],"+":["left"],"-":["right"]},defaults:{angle:90,iterationCount:3,length:14}},sierpinskiTriangle:{axiom:"F-G-G",rules:{F:"F-G+F+G-F",G:"GG"},actions:{F:["draw"],G:["draw"],"+":["left"],"-":["right"]},defaults:{angle:120,iterationCount:4,length:20}},dragonCurve:{axiom:"F",rules:{F:"F+G",G:"F-G"},actions:{F:["draw"],G:["draw"],"+":["left"],"-":["right"]},defaults:{angle:90,iterationCount:8,length:16}},fractalPlant:{axiom:"X",rules:{X:"F+[[X]-X]-F[-FX]+X",F:"FF"},actions:{F:["draw"],"+":["left"],"-":["right"],X:[],"[":["push"],"]":["pop"]},defaults:{angle:25,iterationCount:4,length:17}}};function pt(e){var n=0,a={},s=URL.createObjectURL(new Blob(["$$="+e+";onmessage="+function(r){Promise.resolve(r.data[1]).then(function(u){return $$.apply($$,u)}).then(function(u){postMessage([r.data[0],0,u],[u].filter(function(t){return t instanceof ArrayBuffer||t instanceof MessagePort||self.ImageBitmap&&t instanceof ImageBitmap}))},function(u){postMessage([r.data[0],1,""+u])})}])),o=new Worker(s);return o.onmessage=function(r){a[r.data[0]][r.data[1]](r.data[2]),a[r.data[0]]=null},function(r){return r=[].slice.call(arguments),new Promise(function(){a[++n]=arguments,o.postMessage([n,r],r.filter(function(u){return u instanceof ArrayBuffer||u instanceof MessagePort||self.ImageBitmap&&u instanceof ImageBitmap}))})}}let he=!1;const _t=()=>he,Oe=tt(1),ce=tt(!1);async function gt({arrangement:e,actions:n,angle:a,startingX:s,startingY:o,ctx:r,length:u}){he=!0;let t=[],g=s,d=o,k=0,F=0;const G=async()=>{F++,F>=Je(Oe)&&(F=0,await new Promise(I=>setTimeout(I,1)))};for(let I=0;I<e.length;I++)for(const O of n[e.charAt(I)]){if(Je(ce)){he=!1,ce.set(!1);return}switch(O){case"draw":await G();let N=g+Math.cos(k)*u,V=d+Math.sin(k)*u;r.moveTo(g,d),r.lineTo(N,V),r.stroke(),r.closePath(),g=N,d=V;break;case"right":k+=a;break;case"left":k-=a;break;case"push":t.push([g,d,k]);break;case"pop":let v=t.pop();g=v[0],d=v[1],k=v[2];break}}he=!1}const bt=pt(async(e,n,a)=>{let s=e;for(let o=0;o<a;o++){let r="";for(let u=0;u<s.length;u++){let t=s.charAt(u);t in n?r+=n[t]:r+=t}s=r}return s});function Ze(e,n,a){const s=e.slice();return s[25]=n[a][0],s[26]=n[a][1],s[27]=n,s[28]=a,s}function ze(e,n,a){const s=e.slice();return s[26]=n[a],s}function Qe(e){let n,a,s,o,r,u,t;return{c(){n=h("div"),a=h("div"),s=h("div"),o=b(),r=h("div"),u=b(),t=h("div"),this.h()},l(g){n=c(g,"DIV",{class:!0,style:!0});var d=y(n);a=c(d,"DIV",{class:!0});var k=y(a);s=c(k,"DIV",{class:!0}),y(s).forEach(w),o=m(k),r=c(k,"DIV",{class:!0}),y(r).forEach(w),u=m(k),t=c(k,"DIV",{class:!0}),y(t).forEach(w),k.forEach(w),d.forEach(w),this.h()},h(){p(s,"class","w-4 h-4 rounded-full animate-pulse dark:bg-violet-400"),p(r,"class","w-4 h-4 rounded-full animate-pulse dark:bg-violet-400"),p(t,"class","w-4 h-4 rounded-full animate-pulse dark:bg-violet-400"),p(a,"class","flex items-center justify-center space-x-2"),p(n,"class","absolute left-1/2 top-1/2 translate-x-1"),ft(n,"transform","translate(-50%,-50%)")},m(g,d){te(g,n,d),l(n,a),l(a,s),l(a,o),l(a,r),l(a,u),l(a,t)},d(g){g&&w(n)}}}function $e(e){let n,a=e[26]+"",s;return{c(){n=h("option"),s=H(a),this.h()},l(o){n=c(o,"OPTION",{});var r=y(n);s=J(r,a),r.forEach(w),this.h()},h(){n.__value=e[26],n.value=n.__value},m(o,r){te(o,n,r),l(n,s)},p:Ge,d(o){o&&w(n)}}}function xe(e){let n,a,s,o;function r(){return e[18](e[25])}return{c(){n=h("button"),a=H("(toDefault?)")},l(u){n=c(u,"BUTTON",{});var t=y(n);a=J(t,"(toDefault?)"),t.forEach(w)},m(u,t){te(u,n,t),l(n,a),s||(o=Y(n,"click",r),s=!0)},p(u,t){e=u},d(u){u&&w(n),s=!1,o()}}}function et(e){let n,a,s=e[25].charAt(0).toUpperCase()+e[25].slice(1)+": ",o,r,u,t,g,d,k,F,G,I,O,N;function V(){e[17].call(d,e[25])}let v=e[26]!==e[5][e[25]]&&xe(e);return{c(){n=h("div"),a=h("label"),o=H(s),u=b(),t=h("br"),g=b(),d=h("input"),F=b(),G=h("br"),I=b(),v&&v.c(),this.h()},l(R){n=c(R,"DIV",{class:!0});var E=y(n);a=c(E,"LABEL",{for:!0});var A=y(a);o=J(A,s),A.forEach(w),u=m(E),t=c(E,"BR",{}),g=m(E),d=c(E,"INPUT",{id:!0,type:!0}),F=m(E),G=c(E,"BR",{}),I=m(E),v&&v.l(E),E.forEach(w),this.h()},h(){p(a,"for",r=e[25]),p(d,"id",k=e[25]),p(d,"type","number"),d.required=!0,p(n,"class","py-2")},m(R,E){te(R,n,E),l(n,a),l(a,o),l(n,u),l(n,t),l(n,g),l(n,d),M(d,e[6][e[25]]),l(n,F),l(n,G),l(n,I),v&&v.m(n,null),O||(N=Y(d,"input",V),O=!0)},p(R,E){e=R,E&64&&s!==(s=e[25].charAt(0).toUpperCase()+e[25].slice(1)+": ")&&ht(o,s),E&64&&r!==(r=e[25])&&p(a,"for",r),E&64&&k!==(k=e[25])&&p(d,"id",k),E&64&&j(d.value)!==e[6][e[25]]&&M(d,e[6][e[25]]),e[26]!==e[5][e[25]]?v?v.p(e,E):(v=xe(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null)},d(R){R&&w(n),v&&v.d(),O=!1,N()}}}function mt(e){let n,a,s,o,r,u,t,g,d,k,F,G,I,O,N,V,v,R,E,A,le,ae,ne,W,re,se,ie,C,P,de,pe,_e,Z,ge,be,me,ve,X,we,Ee,ke,z,ye,Fe,Be,Ce,U,Ie,oe,Pe,Re,Te,S,ue,De,Le,Q,Ne,fe,Ae,Ve,L=e[7]&&Qe(),$=e[9],T=[];for(let i=0;i<$.length;i+=1)T[i]=$e(ze(e,$,i));let x=Object.entries(e[6]),D=[];for(let i=0;i<x.length;i+=1)D[i]=et(Ze(e,x,i));return{c(){L&&L.c(),n=b(),a=h("div"),s=h("div"),o=h("div"),r=h("canvas"),u=b(),t=h("div"),g=h("h1"),d=H("Choose a preset:"),k=b(),F=h("select");for(let i=0;i<T.length;i+=1)T[i].c();G=b(),I=h("br"),O=b(),N=h("label"),V=H("Rotate:"),v=b(),R=h("br"),E=b(),A=h("input"),le=b(),ae=h("br"),ne=b(),W=h("label"),re=H("Canvas Height:"),se=b(),ie=h("br"),C=b(),P=h("input"),de=b(),pe=h("br"),_e=b(),Z=h("label"),ge=H("Canvas Width:"),be=b(),me=h("br"),ve=b(),X=h("input"),we=b(),Ee=h("br"),ke=b(),z=h("label"),ye=H("Speed:"),Fe=b(),Be=h("br"),Ce=b(),U=h("input"),Ie=b(),oe=h("div"),Pe=b(),Re=h("hr"),Te=b(),S=h("form");for(let i=0;i<D.length;i+=1)D[i].c();ue=b(),De=h("hr"),Le=b(),Q=h("button"),Ne=H("(Submit)"),this.h()},l(i){L&&L.l(i),n=m(i),a=c(i,"DIV",{class:!0,style:!0});var B=y(a);s=c(B,"DIV",{class:!0});var _=y(s);o=c(_,"DIV",{class:!0});var q=y(o);r=c(q,"CANVAS",{height:!0,width:!0}),y(r).forEach(w),q.forEach(w),_.forEach(w),u=m(B),t=c(B,"DIV",{class:!0});var f=y(t);g=c(f,"H1",{});var Xe=y(g);d=J(Xe,"Choose a preset:"),Xe.forEach(w),k=m(f),F=c(f,"SELECT",{});var Se=y(F);for(let K=0;K<T.length;K+=1)T[K].l(Se);Se.forEach(w),G=m(f),I=c(f,"BR",{}),O=m(f),N=c(f,"LABEL",{for:!0});var Ue=y(N);V=J(Ue,"Rotate:"),Ue.forEach(w),v=m(f),R=c(f,"BR",{}),E=m(f),A=c(f,"INPUT",{id:!0,type:!0}),le=m(f),ae=c(f,"BR",{}),ne=m(f),W=c(f,"LABEL",{for:!0});var Me=y(W);re=J(Me,"Canvas Height:"),Me.forEach(w),se=m(f),ie=c(f,"BR",{}),C=m(f),P=c(f,"INPUT",{id:!0,type:!0,min:!0}),de=m(f),pe=c(f,"BR",{}),_e=m(f),Z=c(f,"LABEL",{for:!0});var Ye=y(Z);ge=J(Ye,"Canvas Width:"),Ye.forEach(w),be=m(f),me=c(f,"BR",{}),ve=m(f),X=c(f,"INPUT",{id:!0,type:!0,min:!0}),we=m(f),Ee=c(f,"BR",{}),ke=m(f),z=c(f,"LABEL",{for:!0});var je=y(z);ye=J(je,"Speed:"),je.forEach(w),Fe=m(f),Be=c(f,"BR",{}),Ce=m(f),U=c(f,"INPUT",{id:!0,type:!0,min:!0}),Ie=m(f),oe=c(f,"DIV",{class:!0}),y(oe).forEach(w),Pe=m(f),Re=c(f,"HR",{}),Te=m(f),S=c(f,"FORM",{});var ee=y(S);for(let K=0;K<D.length;K+=1)D[K].l(ee);ue=m(ee),De=c(ee,"HR",{}),Le=m(ee),Q=c(ee,"BUTTON",{type:!0});var He=y(Q);Ne=J(He,"(Submit)"),He.forEach(w),ee.forEach(w),f.forEach(w),B.forEach(w),this.h()},h(){p(r,"height",e[3]),p(r,"width",e[4]),p(o,"class","overflow-auto"),p(s,"class","w-full h-full"),e[1]===void 0&&rt(()=>e[12].call(F)),p(N,"for","rotate"),p(A,"id","rotate"),p(A,"type","number"),p(W,"for","height"),p(P,"id","height"),p(P,"type","number"),p(P,"min","1"),p(Z,"for","width"),p(X,"id","width"),p(X,"type","number"),p(X,"min","1"),p(z,"for","speed"),p(U,"id","speed"),p(U,"type","number"),p(U,"min","1"),p(oe,"class","py-1"),p(Q,"type","submit"),p(t,"class","w-1/5 bg-gray-400 h-screen p-2 fixed right-0"),p(a,"class","flex flex-row w-full h-full"),p(a,"style",fe=e[7]?"opacity: 0.5; pointer-events: none;":"")},m(i,B){L&&L.m(i,B),te(i,n,B),te(i,a,B),l(a,s),l(s,o),l(o,r),e[11](r),l(a,u),l(a,t),l(t,g),l(g,d),l(t,k),l(t,F);for(let _=0;_<T.length;_+=1)T[_].m(F,null);We(F,e[1]),l(t,G),l(t,I),l(t,O),l(t,N),l(N,V),l(t,v),l(t,R),l(t,E),l(t,A),M(A,e[2]),l(t,le),l(t,ae),l(t,ne),l(t,W),l(W,re),l(t,se),l(t,ie),l(t,C),l(t,P),M(P,e[3]),l(t,de),l(t,pe),l(t,_e),l(t,Z),l(Z,ge),l(t,be),l(t,me),l(t,ve),l(t,X),M(X,e[4]),l(t,we),l(t,Ee),l(t,ke),l(t,z),l(z,ye),l(t,Fe),l(t,Be),l(t,Ce),l(t,U),M(U,e[8]),l(t,Ie),l(t,oe),l(t,Pe),l(t,Re),l(t,Te),l(t,S);for(let _=0;_<D.length;_+=1)D[_].m(S,null);l(S,ue),l(S,De),l(S,Le),l(S,Q),l(Q,Ne),Ae||(Ve=[Y(F,"change",e[12]),Y(A,"input",e[13]),Y(P,"input",e[14]),Y(P,"input",e[10]),Y(X,"input",e[15]),Y(X,"input",e[10]),Y(U,"input",e[16]),Y(S,"submit",st(e[10]))],Ae=!0)},p(i,[B]){if(i[7]?L||(L=Qe(),L.c(),L.m(n.parentNode,n)):L&&(L.d(1),L=null),B&8&&p(r,"height",i[3]),B&16&&p(r,"width",i[4]),B&512){$=i[9];let _;for(_=0;_<$.length;_+=1){const q=ze(i,$,_);T[_]?T[_].p(q,B):(T[_]=$e(q),T[_].c(),T[_].m(F,null))}for(;_<T.length;_+=1)T[_].d(1);T.length=$.length}if(B&514&&We(F,i[1]),B&4&&j(A.value)!==i[2]&&M(A,i[2]),B&8&&j(P.value)!==i[3]&&M(P,i[3]),B&16&&j(X.value)!==i[4]&&M(X,i[4]),B&256&&j(U.value)!==i[8]&&M(U,i[8]),B&96){x=Object.entries(i[6]);let _;for(_=0;_<x.length;_+=1){const q=Ze(i,x,_);D[_]?D[_].p(q,B):(D[_]=et(q),D[_].c(),D[_].m(S,ue))}for(;_<D.length;_+=1)D[_].d(1);D.length=x.length}B&128&&fe!==(fe=i[7]?"opacity: 0.5; pointer-events: none;":"")&&p(a,"style",fe)},i:Ge,o:Ge,d(i){L&&L.d(i),i&&w(n),i&&w(a),e[11](null),qe(T,i),qe(D,i),Ae=!1,it(Ve)}}}function vt(e,n,a){let s;ot(e,Oe,C=>a(8,s=C));let o,r=!1,u=1400,t=1400,g={startingX:100,startingY:u/2,angle:45,length:6,iterationCount:4},d=JSON.parse(JSON.stringify(g)),k,F,G,I="binaryTree",O=Object.keys(Ke);function N(C){let P=Ke[C];k=P.axiom,F=P.rules,G=P.actions,a(5,g.angle=P.defaults.angle,g),a(5,g.length=P.defaults.length,g),a(5,g.iterationCount=P.defaults.iterationCount,g),a(6,d=JSON.parse(JSON.stringify(g))),v()}let V=!1;async function v(){if(!r)return;if(_t())return ce.set(!0);R.clearRect(0,0,o.width,o.height),R.beginPath(),a(7,V=!0);const C=await bt(k,F,d.iterationCount);a(7,V=!1),await gt({arrangement:C,actions:G,ctx:R,angle:d.angle*(Math.PI/180),startingX:d.startingX,startingY:d.startingY,length:d.length})}ce.subscribe(async C=>{C||await v()});let R;ut(()=>{R=o.getContext("2d"),r=!0,v()});let E=0;function A(C){ct[C?"unshift":"push"](()=>{o=C,a(0,o),a(2,E)})}function le(){I=dt(this),a(1,I),a(9,O)}function ae(){E=j(this.value),a(2,E)}function ne(){u=j(this.value),a(3,u)}function W(){t=j(this.value),a(4,t)}function re(){s=j(this.value),Oe.set(s)}function se(C){d[C]=j(this.value),a(6,d)}const ie=C=>a(6,d[C]=g[C],d);return e.$$.update=()=>{e.$$.dirty&2&&N(I),e.$$.dirty&5&&o&&a(0,o.style.transform=`rotate(${E}deg)`,o)},[o,I,E,u,t,g,d,V,s,O,v,A,le,ae,ne,W,re,se,ie]}class kt extends lt{constructor(n){super(),at(this,n,vt,mt,nt,{})}}export{kt as default};
